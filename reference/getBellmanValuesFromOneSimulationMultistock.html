<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute Bellman values for several storage based on one simulation — getBellmanValuesFromOneSimulationMultistock • antaresWaterValues</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute Bellman values for several storage based on one simulation — getBellmanValuesFromOneSimulationMultistock"><meta name="description" content="First, an Antares simulation (based on short-term trajectories or trajectories given by the simulation output of simu) is run.
Marginal prices and costs of this simulation are used to build univariate and independent reward functions for each area with the function get_Reward() with method_old = F.
Finally, Bellman values and water values are computed with Grid_Matrix().
This method is fast and gives good results when storage are not too important in the study. Otherwise, it is better to compute Bellman values storage per storage."><meta property="og:description" content="First, an Antares simulation (based on short-term trajectories or trajectories given by the simulation output of simu) is run.
Marginal prices and costs of this simulation are used to build univariate and independent reward functions for each area with the function get_Reward() with method_old = F.
Finally, Bellman values and water values are computed with Grid_Matrix().
This method is fast and gives good results when storage are not too important in the study. Otherwise, it is better to compute Bellman values storage per storage."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">antaresWaterValues</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/computation_watervalues.html">Watervalues computation</a></li>
    <li><a class="dropdown-item" href="../articles/grid_Matrix-parameters.html">Grid_Matrix parameters</a></li>
    <li><a class="dropdown-item" href="../articles/Reward-interpolation.html">Reward interpolation method</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rte-antares-rpackage/antaresWaterValues/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute Bellman values for several storage based on one simulation</h1>
      <small class="dont-index">Source: <a href="https://github.com/rte-antares-rpackage/antaresWaterValues/blob/v1.2.0/R/multistock_1simulation.R" class="external-link"><code>R/multistock_1simulation.R</code></a></small>
      <div class="d-none name"><code>getBellmanValuesFromOneSimulationMultistock.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>First, an Antares simulation (based on short-term trajectories or trajectories given by the simulation output of <code>simu</code>) is run.
Marginal prices and costs of this simulation are used to build univariate and independent reward functions for each area with the function <code><a href="get_Reward.html">get_Reward()</a></code> with <code>method_old = F</code>.
Finally, Bellman values and water values are computed with <code><a href="Grid_Matrix.html">Grid_Matrix()</a></code>.
This method is fast and gives good results when storage are not too important in the study. Otherwise, it is better to compute Bellman values storage per storage.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getBellmanValuesFromOneSimulationMultistock</span><span class="op">(</span></span>
<span>  <span class="va">opts</span>,</span>
<span>  <span class="va">path_solver</span>,</span>
<span>  <span class="va">mcyears</span>,</span>
<span>  <span class="va">list_areas</span>,</span>
<span>  <span class="va">list_pumping</span>,</span>
<span>  <span class="va">list_efficiency</span>,</span>
<span>  <span class="va">force_final_level</span>,</span>
<span>  <span class="va">penalty_final_level_low</span>,</span>
<span>  <span class="va">penalty_final_level_high</span>,</span>
<span>  <span class="va">penalty_low</span>,</span>
<span>  <span class="va">penalty_high</span>,</span>
<span>  write_vu <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  simu <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-opts">opts<a class="anchor" aria-label="anchor" href="#arg-opts"></a></dt>
<dd><p>List of study parameters returned by the function <code>antaresRead::setSimulationPath(simulation="input")</code> in input mode.</p></dd>


<dt id="arg-path-solver">path_solver<a class="anchor" aria-label="anchor" href="#arg-path-solver"></a></dt>
<dd><p>Character containing the Antares Solver path, argument passed to <code><a href="https://rte-antares-rpackage.github.io/antaresEditObject/reference/runSimulation.html" class="external-link">runSimulation</a></code>.</p></dd>


<dt id="arg-mcyears">mcyears<a class="anchor" aria-label="anchor" href="#arg-mcyears"></a></dt>
<dd><p>Vector of integer. Monte Carlo years used to compute water values.</p></dd>


<dt id="arg-list-areas">list_areas<a class="anchor" aria-label="anchor" href="#arg-list-areas"></a></dt>
<dd><p>Vector of areas concerned by simulations.</p></dd>


<dt id="arg-list-pumping">list_pumping<a class="anchor" aria-label="anchor" href="#arg-list-pumping"></a></dt>
<dd><p>Named vector of binary to tell if pumping is available in areas.</p></dd>


<dt id="arg-list-efficiency">list_efficiency<a class="anchor" aria-label="anchor" href="#arg-list-efficiency"></a></dt>
<dd><p>Named vector of pumping efficiency.</p></dd>


<dt id="arg-force-final-level">force_final_level<a class="anchor" aria-label="anchor" href="#arg-force-final-level"></a></dt>
<dd><p>Binary. Whether final level should be constrained.</p></dd>


<dt id="arg-penalty-final-level-low">penalty_final_level_low<a class="anchor" aria-label="anchor" href="#arg-penalty-final-level-low"></a></dt>
<dd><p>Double. Penalties for both bottom rule curve to constrain final level.</p></dd>


<dt id="arg-penalty-final-level-high">penalty_final_level_high<a class="anchor" aria-label="anchor" href="#arg-penalty-final-level-high"></a></dt>
<dd><p>Double. Penalties for top rule curve to constrain final level.</p></dd>


<dt id="arg-penalty-low">penalty_low<a class="anchor" aria-label="anchor" href="#arg-penalty-low"></a></dt>
<dd><p>Double. Penalty for violating the bottom rule curve, comparable to the unsupplied energy cost.</p></dd>


<dt id="arg-penalty-high">penalty_high<a class="anchor" aria-label="anchor" href="#arg-penalty-high"></a></dt>
<dd><p>Double. Penalty for violating the top rule curve, comparable to the spilled energy cost.</p></dd>


<dt id="arg-write-vu">write_vu<a class="anchor" aria-label="anchor" href="#arg-write-vu"></a></dt>
<dd><p>Binary. True to write water values in the Antares study.</p></dd>


<dt id="arg-simu">simu<a class="anchor" aria-label="anchor" href="#arg-simu"></a></dt>
<dd><p>List of simulation parameters returned by the function <code><a href="https://rte-antares-rpackage.github.io/antaresRead/reference/setSimulationPath.html" class="external-link">antaresRead::setSimulationPath()</a></code> with the simulation selected from which to use the storage trajectory to run the simulation.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">dplyr::tibble()</a></code> similar to <code>aggregated_results</code> from <code><a href="Grid_Matrix.html">Grid_Matrix()</a></code> with one additional column <code>"area"</code>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dhia Gharsallaoui, Juliette Gerbaux.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>


# Compute reward functions based on one given simulation

Reward functions are computed for all weeks from 1 to 52 and for all
scenarios in `mcyears` for the given area. For a specific week and a
specific scenario, the reward function is evaluated for all controls
listed in `possible_controls` based on marginal prices and on the real
control done in the simulation. This function is mainly used in
[`get_Reward()`](https://rte-antares-rpackage.github.io/antaresWaterValues/reference/get_Reward.md).

## Usage

``` r
get_local_reward(
  simu,
  possible_controls,
  max_hydro_hourly,
  area,
  mcyears,
  u0,
  efficiency
)
```

## Arguments

- simu:

  List of simulation parameters returned by the function
  [`antaresRead::setSimulationPath()`](https://rte-antares-rpackage.github.io/antaresRead/reference/setSimulationPath.html)
  with the simulation selected.

- possible_controls:

  If `method_old=FALSE`, controls for which to compute reward, generated
  by
  [`constraint_generator()`](https://rte-antares-rpackage.github.io/antaresWaterValues/reference/constraint_generator.md).

- max_hydro_hourly:

  Maximum hourly pumping and generating power generated by the function
  [`get_max_hydro()`](https://rte-antares-rpackage.github.io/antaresWaterValues/reference/get_max_hydro.md)
  with `timeStep="hourly"`.

- area:

  Character. The Antares area concerned by water values computation.

- mcyears:

  Vector of integer. Monte Carlo years used to compute water values.

- u0:

  A
  [`dplyr::tibble()`](https://tibble.tidyverse.org/reference/tibble.html)
  with columns `"week"`, `"u"` and `"mcYear"` (optional) that gives
  constraint values per week (and per scenario) used in the simulation.
  Could be extracted from the `simulation_values` output of
  [`runWaterValuesSimulation()`](https://rte-antares-rpackage.github.io/antaresWaterValues/reference/runWaterValuesSimulation.md)
  by filtering column `"sim"` to the corresponding simulation.

- efficiency:

  Double between 0 and 1. Pumping efficiency ratio. Get it with
  [`getPumpEfficiency()`](https://rte-antares-rpackage.github.io/antaresWaterValues/reference/getPumpEfficiency.md).

## Value

A
[`dplyr::tibble()`](https://tibble.tidyverse.org/reference/tibble.html)
with columns `"week"`, `"mcYear"`, `"u"` and `"reward"`. Controls in
column `"u"` correspond to `possible_controls`.

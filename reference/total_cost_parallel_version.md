# Computes the total reward for a list of candidate following the reward function, with parallel processing. The storage volume is constant. These function is called inside `parLapply()`.

Computes the total reward for a list of candidate following the reward
function, with parallel processing. The storage volume is constant.
These function is called inside `parLapply()`.

## Usage

``` r
total_cost_parallel_version(
  candidate_index,
  new_candidate_grid,
  node,
  mc_years_optim,
  candidates_types,
  storage_vol,
  reward_db,
  cvar,
  opts,
  penalty_low,
  penalty_high,
  penalty_final_level,
  storage_annual_cost,
  storage_final_level,
  max_hydro_weekly,
  inflow
)
```

## Arguments

- candidate_index:

  Integer. Index of the candidate to study in `new_candidate_grid`.
  Argument passed to `parLapply()`

- new_candidate_grid:

  List of cluster candidates to study at these iteration.

- node:

  Character. Name of the area where the total reward is computed

- mc_years_optim:

  Vector of integers. Monte Carlo years to compute reward

- candidates_types:

  Data_frame with column names : c("index", "name", "type", "TOTEX",
  "Marg_price"). It is a parameter of
  `MultiStock_H2_Investment_reward_compute_once`.

- storage_vol:

  Integer. Volume of the storage candidate

- reward_db:

  List. List of rewards and decision space from the output of the
  function
  [`antaresWaterValues::get_Reward()`](https://rte-antares-rpackage.github.io/antaresWaterValues/reference/get_Reward.md).
  Rewards and decision spaces are given for each area marked by their
  number.

- cvar:

  Numeric in \[0,1\]. The probability used in cvar algorithm.

- opts:

  List of study parameters returned by the function
  `antaresRead::setSimulationPath(simulation="input")` in input mode.

- penalty_low:

  Integer. Penalty for lower guide curve.

- penalty_high:

  Integer. Penalty for higher guide curve.

- penalty_final_level:

  Integer. Penalty for higher and lower final level.

- storage_annual_cost:

  Numeric. Total annual cost of the storage candidate in eur/MWh

- storage_final_level:

  Numeric in \[0, 100\]. Final and initial level in percentage of H2
  storage. Must be in adequacy with the step number if the reward
  function.

- max_hydro_weekly:

  Data.frame. Generated by
  [`get_max_hydro()`](https://rte-antares-rpackage.github.io/antaresWaterValues/reference/get_max_hydro.md)

- inflow:

  Generated by
  [`get_inflow()`](https://rte-antares-rpackage.github.io/antaresWaterValues/reference/get_inflow.md)

## Value

The total reward for the specified candidates in euros. Because of the
Bellman values it is usually negative and large
